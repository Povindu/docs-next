---
import MarkdownLayout from "@layouts/Markdown.astro";
import { getEntry, getCollection } from "astro:content";
import { getTableOfContentsFromCollection } from "@utils/tocUtils";

const aboutPage = await getEntry("contribute", "about");
if (!aboutPage) {
  throw new Error("Missing contribute/about entry");
}

const collectionPath = "contribution" as const;

// Build ToC for the sidebar
const tocEntries = await getCollection("toc", (entry) =>
  entry.id.startsWith(collectionPath),
);

const ToCData = await getTableOfContentsFromCollection(
  tocEntries,
  collectionPath,
);
---

<MarkdownLayout
  entry={aboutPage}
  toc={ToCData}
  language="en"
  isLearn={false}
  TOCBasePath="contribute"
/>
