---
import ToCCard from "./ToCCard.astro";
import type { TocItem } from "../";
import { getTableOfContents } from "../utils/TableOfContent";
const { data, collection, liveUrl } = Astro.props;
---

<section>
  <ul class="px-4">
    <!-- <p>LiveUrl: {liveUrl}</p> -->

    {
      data.items?.map((item: TocItem) => (
        <div class="list-none">
          <ToCCard collection={collection} item={item} />
          {item.href && item.href.split(".").pop() == "yml" && (
            <Astro.self
              collection={collection}
              data={getTableOfContents(
                `release-notes/${item.href.split(".").slice(0, -1).join(".")}`
              )}
            />
          )}

          {/* {item.href &&
            item.href.split(".").pop() == "yml" &&
            console.log(
              getTableOfContents(
                `release-notes/${item.href.split(".").slice(0, -1).join(".")}`
              )
            )} */}
        </div>
      ))
    }
  </ul>
</section>
